import{_ as Y,B as U}from"./phone-pc2-90f75660.js";import{d as D,o as w,e as M,f as r,r as c,G as T,bO as z,m as H,I as L,v as t,x as o,u as a,Q as B,L as Q,p,q as W,s as G,l as X,O as E,C as I,z as h,bP as Z}from"./index-979a7f5f.js";import{a as m,N as V}from"./FormItem-7f5b7874.js";import{N as F}from"./InputGroup-a14d7168.js";import{a as q}from"./Checkbox-565f71f3.js";import{N as J}from"./Space-1eccc360.js";const $={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ee=r("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2"}),r("path",{d:"M3 7l9 6l9-6"})],-1),te=[ee],ae=D({name:"Mail",render:function(e,k){return w(),M("svg",$,te)}}),oe={class:"login-page"},ne=r("div",{class:"down"},[r("img",{src:Y})],-1),le={class:"login"},ie=r("div",{class:"logo-box"},[r("img",{src:"data:image/png;base64,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",class:"logo-box__icon",alt:""}),r("div",{class:"logo-box__text"},"PikPak")],-1),re={class:"login-box"},se={class:"login-other"},fe=D({__name:"sms",setup(P){const e=c({phone_number:"",verification_code:"",captcha_token:"",verification_id:""}),k=c(),x=c(!1),N={phone_number:[{required:!0,message:"请输入手机号",trigger:"blur"}],verification_code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},g=c(!1),f=c(!1),y=T(),b=z(),R=(()=>{let l=32,n="abcdefhijkmnprstwxyz2345678",u=n.length,i="";for(let s=0;s<l;s++)i+=n.charAt(Math.floor(Math.random()*u));return i})(),C=l=>h.post("https://user.mypikpak.com/v1/shield/captcha/init?client_id=YNxT9w7GMdWvEOKa",{action:l||"POST:/v1/auth/verification",captcha_token:e.value.captcha_token||"",client_id:"YNxT9w7GMdWvEOKa",device_id:R,meta:{phone_number:e.value.phone_number},redirect_uri:"xlaccsdk01://xunlei.com/callback?state=harbor"}).then(n=>{n.data&&n.data.captcha_token&&(e.value.captcha_token=n.data.captcha_token)}),v=c(!1),A=c(60),d=c(),j=()=>{A.value=59,d.value&&clearInterval(d.value),d.value=setInterval(()=>{if(A.value--,A.value<=0){clearInterval(d.value),A.value=60;return}},1e3)},O=()=>{if(e.value.phone_number){if(e.value.phone_number.indexOf("+")===-1)return b.error("请输入区号加手机号如+8618513579246"),!1;e.value.captcha_token="",g.value=!0,C("POST:/v1/auth/verification").then(()=>{h.post("https://user.mypikpak.com/v1/auth/verification?client_id=YNxT9w7GMdWvEOKa",{captcha_token:e.value.captcha_token,client_id:"YNxT9w7GMdWvEOKa",phone_number:e.value.phone_number,locale:"zh-cn",target:"ANY"}).then(l=>{e.value.verification_id=l.data.verification_id,v.value=l.data.is_user||!1,j()}).finally(()=>{g.value=!1})}).catch(()=>{g.value=!1})}else return!1},S=l=>{Z.get("https://invite.z7.workers.dev/"+l.sub,{headers:{authorization:l.token_type+" "+l.access_token}}).then(n=>{})},K=l=>{l.preventDefault(),k.value.validate(n=>{n||(f.value=!0,h.post("https://user.mypikpak.com/v1/auth/verification/verify?client_id=YNxT9w7GMdWvEOKa",{client_id:"YNxT9w7GMdWvEOKa",verification_id:e.value.verification_id,verification_code:e.value.verification_code}).then(u=>{C(v.value?"POST:/v1/auth/signin":"POST:/v1/auth/signup").then(()=>{let i="https://user.mypikpak.com/v1/auth/signup",s={captcha_token:e.value.captcha_token,client_id:"YNxT9w7GMdWvEOKa",client_secret:"dbw2OtmVEeuUvIptb1Coyg",verification_token:u.data.verification_token};v.value?(i="https://user.mypikpak.com/v1/auth/signin",s.username=e.value.phone_number):(s.phone_number=e.value.phone_number,s.password="",s.name="U_"+e.value.phone_number.slice(-4)),h.post(i,s).then(_=>{x.value&&!v.value&&S(_.data),window.localStorage.setItem("pikpakLogin",JSON.stringify(_.data)),window.localStorage.removeItem("pikpakLoginData"),b.success("登录成功"),y.push("/")}).catch(_=>{f.value=!1})})}).catch(u=>{f.value=!1}))})};return H(()=>{d.value&&clearInterval(d.value)}),(l,n)=>{const u=L("router-link");return w(),M("div",oe,[ne,r("div",le,[ie,r("div",re,[t(a(V),{ref_key:"formRef",ref:k,"label-align":"left",style:{"padding-top":"30px"},model:e.value,rules:N,"label-placement":"left","label-width":"0",class:"login-form"},{default:o(()=>[t(a(m),{path:"email"},{default:o(()=>[t(a(B),{value:e.value.phone_number,"onUpdate:value":n[0]||(n[0]=i=>e.value.phone_number=i),placeholder:"请输入区号加手机号如+8618513579246"},null,8,["value"])]),_:1}),t(a(m),{path:"verification_code"},{default:o(()=>[t(a(F),null,{default:o(()=>[t(a(B),{value:e.value.verification_code,"onUpdate:value":n[1]||(n[1]=i=>e.value.verification_code=i),placeholder:"请输入验证码"},null,8,["value"]),t(a(Q),{disabled:A.value<60,loading:g.value,onClick:O},{default:o(()=>[p(W(A.value>=60?"发送验证码":"重新发送 "+A.value+"s"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1}),v.value?X("",!0):(w(),G(a(m),{key:0,label:""},{default:o(()=>[t(a(q),{checked:x.value,"onUpdate:checked":n[2]||(n[2]=i=>x.value=i)},{default:o(()=>[p("接受邀请获得10天vip")]),_:1},8,["checked"])]),_:1})),t(a(m),null,{default:o(()=>[t(a(Q),{type:"primary",class:"block",loading:f.value,onClick:K},{default:o(()=>[p("登录")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),r("div",se,[t(a(J),{inline:""},{default:o(()=>[t(a(E),null,{trigger:o(()=>[t(u,{to:"login"},{default:o(()=>[t(a(I),{color:"#306eff",size:32},{default:o(()=>[t(a(ae))]),_:1})]),_:1})]),default:o(()=>[p(" 邮箱登陆 ")]),_:1}),t(a(E),null,{trigger:o(()=>[t(a(I),{color:"#306eff",size:32},{default:o(()=>[t(a(U))]),_:1})]),default:o(()=>[p(" APP内谷歌登录的账号请先通过忘记密码设置密码后登录 ")]),_:1})]),_:1})])])])])}}});export{fe as default};
